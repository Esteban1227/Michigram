(()=>{"use strict";function e(e,t){return Math.floor(Math.random()*(t-e))+e}function t(){const e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(t),window.scrollTo(0,e-e/5))}function n(){s.classList.remove("inactive"),o.removeEventListener("click",n),o.addEventListener("click",i)}function i(){s.classList.add("inactive"),o.removeEventListener("click",i),o.addEventListener("click",n)}const a=document.getElementById("randomMichis"),c=document.getElementById("favoriteMichis"),s=document.getElementById("menuMobilContainer"),o=document.getElementById("btnMenuMobile");o.addEventListener("click",n);const r=[...document.querySelectorAll(".nav__right--iconHome")],d=[...document.querySelectorAll(".nav__right--iconFav")],m="https://api.thecatapi.com/v1",l="53747e00-36d1-4c03-b6a6-5c31dfb1157e";async function h(){const t=await fetch(`${m}/images/search?limit=10`,{method:"GET",headers:{"X-API-KEY":l}}),n=await t.json(),i=await fetch("https://randomuser.me/api/1.3/?results=20&inc=name,picture"),{results:c}=await i.json();a.innerHTML="";const s=[];n.forEach((t=>{!function(t,n,i){const a=document.createElement("article");a.classList.add("mainContainer__containerCard");const c=document.createElement("div");c.classList.add("mainContainer__containerInfoUser");const s=document.createElement("img");s.setAttribute("src",`${i[e(1,20)].picture.thumbnail}`),s.classList.add("mainContainer__containerInfoUser--iconUser");const o=document.createElement("h3");o.textContent=`${i[e(1,20)].name.first}`,o.classList.add("mainContainer__containerInfoUser--nameUser"),c.appendChild(s),c.appendChild(o);const r=document.createElement("div");r.classList.add("mainContainer__containerImgUser");const d=document.createElement("img");d.setAttribute("src",`${t.url}`),d.setAttribute("loading","lazy"),d.classList.add("mainContainer__containerImgUser--imgMichi"),r.appendChild(d);const h=document.createElement("div");h.classList.add("mainContainer__containerButtons");const p=document.createElement("img");p.setAttribute("src","../src/assets/heartLikeVector.svg"),p.classList.add("mainContainer__containerButtons--iconLike","iconSizeBig");const v=document.createElement("img");v.setAttribute("src","../src/assets/saveVector.svg"),v.classList.add("mainContainer__containerButtons--iconFav","iconSizeBig");const _=[...document.querySelectorAll(".nav__right--containerCounter")];v.addEventListener("click",(()=>{(async function(e){const t=await fetch(`${m}/favourites`,{method:"POST",headers:{"Content-Type":"application/json","X-API-KEY":l},body:JSON.stringify({image_id:e})});await t.json(),u()})(t.id),_.forEach((e=>{e.classList.add("hardMove"),setTimeout((()=>{e.classList.remove("hardMove")}),1e3)}))})),h.appendChild(p),h.appendChild(v),a.appendChild(c),a.appendChild(r),a.appendChild(h),n.push(a)}(t,s,c)})),a.append(...s)}async function u(){const e=await fetch(`${m}/favourites`,{method:"GET",headers:{"X-API-KEY":l}}),t=await e.json();c.innerHTML="",function(){const e=document.createElement("div");e.classList.add("mainContainerFavorites__container-h2");const t=document.createElement("h2");t.textContent="Tus Michis Favoritos:",e.appendChild(t),c.appendChild(e)}();const n=[];t.forEach((e=>{!function(e,t){const n=document.createElement("article");n.classList.add("mainContainer__containerCard","mainContainer__containerCards--cardFav");const i=document.createElement("div");i.classList.add("mainContainer__containerInfoUser","mainContainer__infoUser--flex-end");const a=document.createElement("img");a.setAttribute("src","../src/assets/ant-design_delete-filled.svg"),a.classList.add("mainContainer__containerInfoUser--iconUser","iconSizeBig"),i.appendChild(a);const c=document.createElement("div");c.classList.add("mainContainer__containerImgUser","mainContainer__containerImgUser--height");const s=document.createElement("img");s.classList.add("mainContainer__containerImgUser--imgMichi","mainContainer__containerImgUser--imgMichi--size"),s.setAttribute("src",`${e.image.url}`),s.setAttribute("loading","lazy"),c.appendChild(s),a.addEventListener("click",(()=>{!async function(e){const t=await fetch((e=>`https://api.thecatapi.com/v1/favourites/${e}`)(e),{method:"DELETE",headers:{"X-API-KEY":l}});await t.json(),u()}(e.id)})),n.appendChild(i),n.appendChild(c),t.push(n)}(e,n)})),c.append(...n),function(e){if(0==e.length){const e=document.createElement("div");e.classList.add("mainContainerFavorites__noMichi");const t=document.createElement("img");t.setAttribute("src","./src/assets/emojione_crying-cat-face.svg"),t.classList.add("mainContainerFavorites__noMichi--imgMichiSad");const n=document.createElement("span");n.classList.add("mainContainerFavorites__noMichi--spanText"),n.textContent="Al parecer no tienes ningun michi favorito";const i=document.createElement("button");i.classList.add("mainContainerFavorites__noMichi--btn"),i.textContent="Buscar Michis",i.addEventListener("click",(()=>{location.hash="Home"})),e.appendChild(t),e.appendChild(n),e.appendChild(i),c.appendChild(e)}}(n),function(e){const t=document.querySelectorAll(".counterFav"),n=[];n.push(...t),n.forEach((t=>{t.innerHTML=e.length}))}(n)}function p(){location.hash.startsWith("#favorite")?(a.classList.add("inactive"),c.classList.remove("inactive")):location.hash.startsWith("#Home")?(a.classList.remove("inactive"),a.classList.remove("smoothTopToBottom"),c.classList.add("inactive")):(u(),h())}d.forEach((e=>{e.addEventListener("click",(()=>{location.hash="favorite",t()}))})),r.forEach((e=>{e.addEventListener("click",(()=>{location.hash="Home",t()}))})),window.addEventListener("DOMContentLoaded",p,!1),window.addEventListener("hashchange",p,!1),location.hash="",document.body.addEventListener("click",(e=>{const t=e.target.tagName;["IMG"].includes(t)&&console.log("click")}))})();